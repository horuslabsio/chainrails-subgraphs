specVersion: 0.0.4
description: Chainrails subgraph for monitoring intent funding
repository: https://github.com/horuslabsio/chainrails-subgraphs.git
schema:
    file: ./schema.graphql
dataSources:
    - kind: ethereum/contract
      name: IntentFactory
      network: base-sepolia
      source:
          address: "0x2F1bEC7A6BAF02C5dD1B1B286C5035486E8cDa00"
          abi: IntentFactory
          startBlock: 32052380
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - Intent
          abis:
              - name: IntentFactory
                file: ./abis/intent_factory.json
          eventHandlers:
              - event: IntentDeclared(indexed address,(uint8,uint8,(address,uint256)[],bytes,address,address,address,uint256,uint256,bool),indexed address)
                handler: handleIntentDeclared
              - event: IntentCreated(indexed address,(uint8,uint8,(address,uint256)[],bytes,address,address,address,uint256,uint256,bool),indexed address)
                handler: handleIntentCreated
          file: ./mappings/intent-factory.ts

    - kind: ethereum/contract
      name: Chainrails
      network: base-sepolia
      source:
          address: "0xF602115c252131E4848a45BB980Fd2aafac2f30b"
          abi: Chainrails
          startBlock: 32052380
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - Intent
          abis:
              - name: Chainrails
                file: ./abis/chainrails.json
          eventHandlers:
              - event: IntentStarted(indexed address,(uint8,uint8,(address,uint256)[],bytes,address,address,address,uint256,uint256,bool))
                handler: handleIntentStarted
          file: ./mappings/chainrails.ts

    - kind: ethereum/contract
      name: USDC
      network: base-sepolia
      source:
          address: "0x036CbD53842c5426634e7929541eC2318f3dCF7e"
          abi: ERC20
          startBlock: 32052380
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - Intent
              - FundingTransaction
          abis:
              - name: ERC20
                file: ./abis/erc20.json
          eventHandlers:
              - event: Transfer(indexed address,indexed address,uint256)
                handler: handleUSDCTransfer
          file: ./mappings/erc20.ts
