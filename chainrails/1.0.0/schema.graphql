type Intent @entity {
    id: ID!
    intentAddress: String!
    sourceChain: Int!
    destinationChain: Int!
    bridgeTokenOutOptions: [TokenAmount!]!
    destinationRecipient: String!
    coordinator: String!
    bridger: String!
    refundAddress: String!
    nonce: BigInt!
    expirationTimestamp: BigInt!
    status: IntentStatus!
    needsRelay: Boolean
    createdAt: BigInt!
    fundedAt: BigInt
    totalFunded: BigInt! # Total amount funded so far
    creator: String # Address of the creator (from IntentCreated event)
    declarer: String # Address of the declarer (from IntentDeclared event)
    fundingTransactions: [FundingTransaction!]! @derivedFrom(field: "intent")
}

type FundingTransaction @entity {
    id: ID! # tx_hash-log_index
    intent: Intent!
    token: String!
    amount: BigInt!
    sender: String!
    transactionHash: String!
    blockNumber: BigInt!
    timestamp: BigInt!
}

type TokenAmount @entity {
    id: ID!
    token: String!
    amount: BigInt!
    intent: Intent!
}

enum IntentStatus {
    DECLARED
    PENDING
    FUNDED
    INITIATED
    BRIDGING
    COMPLETED
}
