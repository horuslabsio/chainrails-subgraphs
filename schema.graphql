type Intent @entity {
    id: ID!
    intentAddress: String!
    sourceChain: Int!
    destinationChain: Int!
    chainId: Int!
    bridgeTokenOutOptions: [TokenAmount!]!
    destinationRecipient: String!
    coordinator: String!
    bridger: String!
    refundAddress: String!
    nonce: BigInt!
    expirationTimestamp: BigInt!
    needsRelay: Boolean
    metadata: String!
    status: IntentStatus!
    totalFunded: BigInt!
    fundingTransactions: [FundingTransaction!]! @derivedFrom(field: "intent")
}

type FundingTransaction @entity {
    id: ID! # tx_hash-log_index
    intent: Intent!
    token: String!
    amount: BigInt!
}

type TokenAmount @entity {
    id: ID!
    token: String!
    amount: BigInt!
    intent: Intent!
}

enum IntentStatus {
    PENDING
    SOURCE_FUNDED
    INITIATED
    DESTINATION_FUNDED
    COMPLETED
}
